(self.webpackChunkspear=self.webpackChunkspear||[]).push([[592],{2940:(v,f,e)=>{e.d(f,{R:()=>n});var u=e(4482),l=e(7359);function n(t,i){return(0,u.e)((0,l.U)(t,i,arguments.length>=2,!0))}},7359:(v,f,e)=>{e.d(f,{U:()=>l});var u=e(5403);function l(n,t,i,c,a){return function(d,m){var P=i,g=t,h=0;d.subscribe((0,u.x)(m,function(C){var E=h++;g=P?n(g,C,E):(P=!0,C),c&&m.next(g)},a&&function(){P&&m.next(g),m.complete()}))}}},7655:(v,f,e)=>{e.r(f),e.d(f,{CONTENT_PLUGIN:()=>I,ContentBinding:()=>C,ContentInstance:()=>E,ContentModule:()=>g,ContentPlugin:()=>h,ContentPluginEditorOptions:()=>b,ContentPluginManager:()=>O});var u=e(136),l=e(8486),n=e(3144),t=e(5671),i=e(6718),c=e(4055),a=e(8488),d=e(5813),m=e(9646),P=e(8154),g=function(){var r=(0,n.Z)(function o(){(0,t.Z)(this,o)});return r.\u0275fac=function(_){return new(_||r)},r.\u0275mod=i.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=i.\u0275\u0275defineInjector({imports:[c.CommonModule]}),r}(),h=function(r){(0,u.Z)(_,r);var o=(0,l.Z)(_);function _(s){var p;return(0,t.Z)(this,_),(p=o.call(this,s)).fileTypes=[],s&&(p.name=p.id,p.handler=void 0!==s.handler?s.handler:void 0,p.selectionComponent=s.selectionComponent?s.selectionComponent:void 0,p.renderComponent=s.renderComponent?s.renderComponent:void 0,p.editorComponent=s.editorComponent?s.editorComponent:void 0),p}return(0,n.Z)(_)}(d.Plugin),C=(0,n.Z)(function r(o){(0,t.Z)(this,r),o&&(this.type=o.type,this.id=o.id)}),E=(0,n.Z)(function r(o){(0,t.Z)(this,r),this.settings=[],o&&(this.pluginName=o.pluginName,o.settings&&(this.settings=o.settings.map(function(_){return new a.AttributeValue(_)})))}),b=(0,n.Z)(function r(o){(0,t.Z)(this,r),this.fullscreen=!1,o&&(this.fullscreen=o.fullscreen)}),I=new i.InjectionToken("ContentPlugin"),O=function(){var r=function(o){(0,u.Z)(s,o);var _=(0,l.Z)(s);function s(p,y){return(0,t.Z)(this,s),_.call(this,p,y)}return(0,n.Z)(s,[{key:"pluginDef",value:function(){return(0,m.of)(new d.PluginDef({name:"content"}))}}]),s}(d.BasePluginManager);return r.\u0275fac=function(_){return new(_||r)(i.\u0275\u0275inject(d.PluginConfigurationManager),i.\u0275\u0275inject(P.ModuleLoaderService))},r.\u0275prov=i.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},461:(v,f,e)=>{e.r(f),e.d(f,{BasePluginManager:()=>C,ConfigDiscovery:()=>h,Plugin:()=>b,PluginConfig:()=>E,PluginConfigModule:()=>O,PluginConfigurationManager:()=>g,PluginDef:()=>I,PluginModule:()=>P});var u=e(4902),l=e(3144),n=e(5671),t=e(6718),i=e(8154),c=e(9646),a=e(4128),d=e(4004),m=e(3900),P=function(){var r=(0,l.Z)(function o(){(0,n.Z)(this,o)});return r.\u0275fac=function(_){return new(_||r)},r.\u0275mod=t.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=t.\u0275\u0275defineInjector({imports:[i.UtilsModule]}),r}(),g=function(){var r=function(){function o(){(0,n.Z)(this,o),this.configs=[]}return(0,l.Z)(o,[{key:"addConfig",value:function(s){this.configs.push(s)}},{key:"getConfigs",value:function(){return this.configs}}]),o}();return r.\u0275fac=function(_){return new(_||r)},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),h=function(){var r=function(){function o(_,s){(0,n.Z)(this,o),this.pcm=_,this.moduleLoader=s}return(0,l.Z)(o,[{key:"loadPlugins",value:function(s){for(var p=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],M=this.pcm.getConfigs(),j=M.length,Z=[],R=function(D){for(var B=M[D].modules.length,L=function(A){M[D].modules[A].plugins.has(s.name)&&(0===y.length||y.some(function(U){return M[D].modules[A].plugins.get(s.name).findIndex(function(k){return k===U})>-1}))&&Z.push(p.moduleLoader.loadModule(M[D].modules[A].module))},w=0;w<B;w++)L(w)},T=0;T<j;T++)R(T);return 0===Z.length?(0,c.of)(!0):(0,a.D)(Z).pipe((0,d.U)(function(){return!0}))}}]),o}();return r.\u0275fac=function(_){return new(_||r)(t.\u0275\u0275inject(g),t.\u0275\u0275inject(i.ModuleLoaderService))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),C=function(){function r(o,_){(0,n.Z)(this,r),this.pcm=o,this.moduleLoader=_,this.pluginInstances=new Map,this.discoveryPipeline=[],this.discovery()}return(0,l.Z)(r,[{key:"discovery",value:function(){this.discoveryPipeline.push(new h(this.pcm,this.moduleLoader))}},{key:"addDiscovery",value:function(_){this.discoveryPipeline.push(_)}},{key:"register",value:function(_){this.pluginInstances.set(_.id,_)}},{key:"getPlugins",value:function(_){var s=this,p=_?_.filter(function(y){return!s.pluginInstances.has(y)}):[];return _&&0===p.length?(0,c.of)(new Map(_.map(function(y){return[y,s.pluginInstances.get(y)]}))):this.pluginDef().pipe((0,m.w)(function(y){return(0,a.D)(s.discoveryPipeline.map(function(M){return M.loadPlugins(y,p)})).pipe((0,d.U)(function(){return _?new Map(_.map(function(M){return[M,s.pluginInstances.get(M)]})):s.pluginInstances}))}))}},{key:"getPlugin",value:function(_){var s=this;return this.pluginInstances.has(_)?(0,c.of)(this.pluginInstances.get(_)):this.pluginDef().pipe((0,m.w)(function(p){return(0,a.D)(s.discoveryPipeline.map(function(y){return y.loadPlugins(p,[_])})).pipe((0,d.U)(function(){return s.pluginInstances.get(_)}))}))}}]),r}(),E=(0,l.Z)(function r(o){(0,n.Z)(this,r),this.modules=[],o&&o.modules&&(this.modules=o.modules.map(function(_){return new O(_)}))}),b=(0,l.Z)(function r(o){(0,n.Z)(this,r),o&&(this.id=o.id,this.title=o.title)}),I=(0,l.Z)(function r(o){(0,n.Z)(this,r),o&&(this.name=o.name)}),O=(0,l.Z)(function r(o){(0,n.Z)(this,r),o&&(this.module=o.module,o.plugins&&(this.plugins=new Map((0,u.Z)(o.plugins))))})},907:(v,f,e)=>{function u(l,n){(null==n||n>l.length)&&(n=l.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=l[t];return i}e.d(f,{Z:()=>u})},7326:(v,f,e)=>{function u(l){if(void 0===l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}e.d(f,{Z:()=>u})},5671:(v,f,e)=>{function u(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}e.d(f,{Z:()=>u})},3144:(v,f,e)=>{e.d(f,{Z:()=>n});var u=e(3997);function l(t,i){for(var c=0;c<i.length;c++){var a=i[c];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,(0,u.Z)(a.key),a)}}function n(t,i,c){return i&&l(t.prototype,i),c&&l(t,c),Object.defineProperty(t,"prototype",{writable:!1}),t}},7762:(v,f,e)=>{e.d(f,{Z:()=>l});var u=e(181);function l(n,t){var i=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!i){if(Array.isArray(n)||(i=(0,u.Z)(n))||t&&n&&"number"==typeof n.length){i&&(n=i);var c=0,a=function(){};return{s:a,n:function(){return c>=n.length?{done:!0}:{done:!1,value:n[c++]}},e:function(h){throw h},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var P,d=!0,m=!1;return{s:function(){i=i.call(n)},n:function(){var h=i.next();return d=h.done,h},e:function(h){m=!0,P=h},f:function(){try{!d&&null!=i.return&&i.return()}finally{if(m)throw P}}}}},8486:(v,f,e)=>{e.d(f,{Z:()=>c});var u=e(1120),l=e(8814),n=e(1002),t=e(7326);function c(a){var d=(0,l.Z)();return function(){var g,P=(0,u.Z)(a);if(d){var h=(0,u.Z)(this).constructor;g=Reflect.construct(P,arguments,h)}else g=P.apply(this,arguments);return function i(a,d){if(d&&("object"===(0,n.Z)(d)||"function"==typeof d))return d;if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");return(0,t.Z)(a)}(this,g)}}},1120:(v,f,e)=>{function u(l){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(l)}e.d(f,{Z:()=>u})},136:(v,f,e)=>{e.d(f,{Z:()=>l});var u=e(9611);function l(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&(0,u.Z)(n,t)}},8814:(v,f,e)=>{function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}e.d(f,{Z:()=>u})},9611:(v,f,e)=>{function u(l,n){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i})(l,n)}e.d(f,{Z:()=>u})},3997:(v,f,e)=>{e.d(f,{Z:()=>n});var u=e(1002);function n(t){var i=function l(t,i){if("object"!==(0,u.Z)(t)||null===t)return t;var c=t[Symbol.toPrimitive];if(void 0!==c){var a=c.call(t,i||"default");if("object"!==(0,u.Z)(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"===(0,u.Z)(i)?i:String(i)}},1002:(v,f,e)=>{function u(l){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(l)}e.d(f,{Z:()=>u})},181:(v,f,e)=>{e.d(f,{Z:()=>l});var u=e(907);function l(n,t){if(n){if("string"==typeof n)return(0,u.Z)(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);if("Object"===i&&n.constructor&&(i=n.constructor.name),"Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return(0,u.Z)(n,t)}}}}]);